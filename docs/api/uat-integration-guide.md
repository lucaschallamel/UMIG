# UMIG API UAT Integration Guide

**Document**: US-030 UAT Integration Materials  
**Generated by**: GENDEV UAT Coordinator Agent v2.3  
**Date**: August 18, 2025  
**Priority**: P0 Critical - UAT Readiness  
**Sprint**: 5 (August 18-22, 2025)

## Executive Summary

This guide provides UAT teams with comprehensive integration materials for effective UMIG API testing. It aligns with Sprint 5 objectives and ensures smooth transition from development to user acceptance testing phase.

## UAT Readiness Checklist

### âœ… Completed Documentation Components

- [x] **Validation Script**: Automated documentation validation (`validate-documentation.js`)
- [x] **Enhanced Examples**: 50+ practical examples with UMIG domain data
- [x] **Error Handling Guide**: Comprehensive error documentation with troubleshooting
- [ ] **Interactive Documentation**: Swagger UI deployment (Day 2 target)
- [ ] **Performance Guide**: API performance and optimization guidance (Day 2 target)

### ðŸ“‹ UAT Team Requirements

- [x] **API Coverage**: All 15+ UMIG APIs documented with working examples
- [x] **Authentication**: HTTP Basic Auth integration documented
- [x] **Error Scenarios**: Complete error handling with resolution steps
- [x] **Test Data**: Realistic UMIG examples (migrations, iterations, teams, steps)
- [x] **Troubleshooting**: Decision tree and best practices

---

## UAT Testing Strategy

### Phase 1: Foundation Validation (Day 1 - Completed)

**Objective**: Verify core API functionality and documentation accuracy

#### Test Areas Covered:

1. **Authentication & Authorization**
   - HTTP Basic Auth mechanism
   - Role-based access control
   - Permission validation

2. **Core CRUD Operations**
   - Create, Read, Update, Delete for all entity types
   - Data validation and constraints
   - Error response accuracy

3. **API Documentation Accuracy**
   - Example requests/responses validation
   - Schema compliance verification
   - Error message accuracy

### Phase 2: Integration Testing (Day 2 - Planned)

**Objective**: Validate complex scenarios and system integration

#### Test Areas to Cover:

1. **Hierarchical Data Operations**
   - Migration â†’ Iteration â†’ Plan â†’ Sequence â†’ Phase â†’ Step workflows
   - Parent-child relationship validation
   - Cascading operations

2. **Bulk Operations**
   - Bulk step updates with performance validation
   - Export/import functionality
   - Error handling in bulk scenarios

3. **Real-time Updates**
   - Step status monitoring
   - Progress tracking
   - Comment management

---

## UAT Test Scenarios

### Scenario 1: Complete Migration Lifecycle

**Priority**: P0 Critical  
**Duration**: 2 hours  
**Objective**: End-to-end happy path validation

#### Test Steps:

```bash
# 1. Create Migration
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "mig_name": "UAT Test Migration - E2E",
    "mig_description": "Complete end-to-end UAT validation migration",
    "mig_start_date": "2025-09-01",
    "mig_end_date": "2025-10-15",
    "mig_business_cutover_date": "2025-10-12",
    "mig_type": "uat_validation",
    "usr_id_owner": 1
  }'

# Expected: 201 Created with migration ID
# Validation: Response contains valid UUID and metadata

# 2. Create Iteration for Migration
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations/{mig_id}/iterations \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "ite_name": "UAT Iteration 1",
    "ite_description": "First UAT testing iteration",
    "ite_start_date": "2025-09-01",
    "ite_end_date": "2025-09-15"
  }'

# Expected: 201 Created with iteration details
# Validation: Proper parent-child relationship established

# 3. Create Team
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/teams \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "tm_name": "UAT Testing Team",
    "tm_description": "Dedicated team for UAT execution",
    "tm_type": "testing",
    "tm_contact_email": "uat-team@company.com",
    "tm_size": 5,
    "usr_id_lead": 1
  }'

# Expected: 201 Created with team details
# Validation: Team assignment capabilities verified

# 4. Retrieve Created Resources
curl -X GET http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations/{mig_id} \
  -H "Authorization: Basic YWRtaW46YWRtaW4="

# Expected: 200 OK with complete migration data
# Validation: All fields populated correctly, timestamps present

# 5. Update Migration Status
curl -X PUT http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations/{mig_id} \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "mig_status": 2,
    "mig_description": "Updated description - In Progress"
  }'

# Expected: 200 OK with updated data
# Validation: Status transition and audit trail
```

#### Success Criteria:

- All operations complete without errors
- Data integrity maintained across operations
- Proper HTTP status codes returned
- Response times under 3 seconds per operation

### Scenario 2: Error Handling Validation

**Priority**: P0 Critical  
**Duration**: 1 hour  
**Objective**: Validate error responses and recovery procedures

#### Test Steps:

```bash
# 1. Test Authentication Errors
curl -X GET http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations
# Expected: 401 Unauthorized

curl -X GET http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic aW52YWxpZDppbnZhbGlk"
# Expected: 401 Unauthorized with clear error message

# 2. Test Validation Errors
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{}'
# Expected: 400 Bad Request with validation details

curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "mig_name": "Test",
    "mig_start_date": "invalid-date"
  }'
# Expected: 400 Bad Request with format error details

# 3. Test Constraint Violations
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/teams \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "tm_name": "Duplicate Team Test",
    "tm_description": "First team"
  }'
# Expected: 201 Created

curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/teams \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "tm_name": "Duplicate Team Test",
    "tm_description": "Duplicate attempt"
  }'
# Expected: 409 Conflict with unique constraint error

# 4. Test Foreign Key Violations
curl -X POST http://localhost:8090/rest/scriptrunner/latest/custom/umig/teams \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "tm_name": "Invalid Lead Team",
    "tm_description": "Team with invalid lead",
    "usr_id_lead": 99999
  }'
# Expected: 400 Bad Request with foreign key error
```

#### Success Criteria:

- All error responses include actionable guidance
- Error codes match documentation specifications
- Error messages are clear and user-friendly
- Recovery procedures work as documented

### Scenario 3: Performance Validation

**Priority**: P1 High  
**Duration**: 1.5 hours  
**Objective**: Validate API performance under realistic load

#### Test Steps:

```bash
# 1. Single Request Performance
time curl -X GET http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic YWRtaW46YWRtaW4="
# Expected: Response time < 3 seconds

# 2. Pagination Performance
curl -X GET "http://localhost:8090/rest/scriptrunner/latest/custom/umig/steps?page=1&limit=50" \
  -H "Authorization: Basic YWRtaW46YWRtaW4="
# Expected: Response time < 3 seconds for 50 items

# 3. Filtering Performance
curl -X GET "http://localhost:8090/rest/scriptrunner/latest/custom/umig/steps?migrationId={mig_id}&status=2" \
  -H "Authorization: Basic YWRtaW46YWRtaW4="
# Expected: Response time < 5 seconds for filtered results

# 4. Bulk Operation Performance
curl -X PUT http://localhost:8090/rest/scriptrunner/latest/custom/umig/steps/bulk/update \
  -H "Authorization: Basic YWRtaW46YWRtaW4=" \
  -H "Content-Type: application/json" \
  -d '{
    "updates": [
      {"step_id": "step_001", "sti_status": 3},
      {"step_id": "step_002", "sti_status": 3},
      {"step_id": "step_003", "sti_status": 3}
    ]
  }'
# Expected: Response time < 10 seconds for bulk update
```

#### Success Criteria:

- Individual operations under 3 seconds
- Bulk operations under 10 seconds
- Memory usage remains stable
- No database connection timeouts

---

## UAT Environment Setup

### Prerequisites

âœ… **Development Environment Running**

- Confluence 9.2.7 accessible at http://localhost:8090
- PostgreSQL database operational
- ScriptRunner 9.21.0 installed and configured
- UMIG API endpoints deployed

âœ… **Test Data Available**

- Sample migrations, iterations, and teams created
- User accounts configured with proper permissions
- Database contains realistic test data volumes

âœ… **Tools Ready**

- curl or Postman for API testing
- Browser for Swagger UI testing (Day 2)
- JSON validation tools
- Performance monitoring capabilities

### Environment Validation

```bash
# 1. Check Confluence accessibility
curl -I http://localhost:8090
# Expected: 200 OK

# 2. Check database connectivity
npm run test:db-connection
# Expected: Database connection successful

# 3. Validate API endpoints
node /docs/api/validate-documentation.js
# Expected: 100% validation pass rate

# 4. Check authentication
curl -X GET http://localhost:8090/rest/scriptrunner/latest/custom/umig/migrations \
  -H "Authorization: Basic YWRtaW46YWRtaW4="
# Expected: 200 OK with migration list
```

---

## UAT Test Data Sets

### Standard Test Migrations

```json
{
  "uat_migrations": [
    {
      "name": "UAT Simple Migration",
      "description": "Basic migration for simple workflow testing",
      "type": "simple",
      "iterations": 1,
      "expected_steps": 10
    },
    {
      "name": "UAT Complex Migration",
      "description": "Multi-iteration migration for complex scenario testing",
      "type": "complex",
      "iterations": 3,
      "expected_steps": 75
    },
    {
      "name": "UAT Performance Migration",
      "description": "Large-scale migration for performance testing",
      "type": "performance",
      "iterations": 2,
      "expected_steps": 500
    }
  ]
}
```

### Standard Test Teams

```json
{
  "uat_teams": [
    {
      "name": "UAT Technical Team",
      "type": "technical",
      "size": 8,
      "focus": "Development and deployment testing"
    },
    {
      "name": "UAT Business Team",
      "type": "business",
      "size": 5,
      "focus": "Process validation and user acceptance"
    },
    {
      "name": "UAT Quality Team",
      "type": "quality",
      "size": 3,
      "focus": "Quality assurance and testing validation"
    }
  ]
}
```

### Test User Accounts

```json
{
  "uat_users": [
    {
      "username": "uat_admin",
      "role": "administrator",
      "permissions": "full_access",
      "purpose": "Administrative operation testing"
    },
    {
      "username": "uat_user",
      "role": "standard_user",
      "permissions": "read_write",
      "purpose": "Standard user workflow testing"
    },
    {
      "username": "uat_readonly",
      "role": "readonly_user",
      "permissions": "read_only",
      "purpose": "Permission boundary testing"
    }
  ]
}
```

---

## UAT Success Criteria

### Critical Success Factors (Must Achieve)

- **100% API Endpoint Functionality**: All documented endpoints work as specified
- **Zero Critical Errors**: No system-breaking issues discovered
- **Authentication Integration**: All auth mechanisms work correctly
- **Error Handling Completeness**: All error scenarios documented and validated
- **Performance Targets Met**: Response times within acceptable limits

### Important Success Factors (Should Achieve)

- **Documentation Accuracy**: 95%+ documentation-to-reality accuracy
- **User Experience Quality**: Intuitive error messages and guidance
- **Integration Reliability**: Consistent behavior across test scenarios
- **Data Integrity**: All operations maintain data consistency

### Enhancement Success Factors (Could Achieve)

- **Advanced Scenario Coverage**: Complex edge cases validated
- **Performance Optimization**: Response times exceed baseline targets
- **Automation Integration**: Test cases ready for automated execution

---

## UAT Reporting Framework

### Daily Test Execution Reports

```markdown
## UAT Daily Report - [Date]

**Test Execution Summary**:

- Test scenarios completed: [X/Y]
- Critical issues discovered: [count]
- API endpoints validated: [count]
- Performance benchmarks met: [X/Y]

**Issues Identified**:

- Issue ID: [ID] - Description: [brief] - Severity: [High/Medium/Low]
- Resolution status: [In Progress/Resolved/Escalated]

**Next Day Focus**:

- Scenario priorities: [list]
- Outstanding issue resolution: [list]
- Performance validation: [areas]
```

### Issue Tracking Template

```markdown
## UAT Issue Report

**Issue ID**: UAT-XXX  
**Date Discovered**: [date]  
**Severity**: [Critical/High/Medium/Low]  
**Test Scenario**: [scenario name]  
**Environment**: [environment details]

**Issue Description**:
[Detailed description of the issue]

**Steps to Reproduce**:

1. [Step 1]
2. [Step 2]
3. [Step 3]

**Expected Behavior**:
[What should happen]

**Actual Behavior**:
[What actually happened]

**API Details**:

- Endpoint: [endpoint]
- Method: [HTTP method]
- Request: [request details]
- Response: [response details]

**Impact Assessment**:
[Business impact and urgency]

**Proposed Resolution**:
[Suggested fix or workaround]

**Status**: [Open/In Progress/Resolved/Closed]
```

---

## UAT Team Communication Plan

### Communication Channels

- **Primary**: Direct team meetings for issue discussion
- **Secondary**: Email updates for status reports
- **Escalation**: Development team for critical issues
- **Documentation**: Shared repository for test results

### Meeting Schedule

- **Daily Standup**: 9:00 AM - Progress and blockers
- **Midday Checkpoint**: 1:00 PM - Issue resolution status
- **End-of-Day Review**: 5:00 PM - Summary and next day planning

### Escalation Triggers

- **Critical Issues**: System-breaking errors, authentication failures
- **Performance Issues**: Response times exceeding 10 seconds
- **Documentation Gaps**: Missing or incorrect API documentation
- **Blocking Issues**: Issues preventing test scenario completion

---

## Next Steps and Day 2 Preparation

### Immediate Actions (Day 1 Completion)

- [x] **Documentation Foundation**: Core documentation components ready
- [x] **Test Environment**: Environment validated and test data prepared
- [x] **UAT Team Readiness**: Team briefed and equipped for testing
- [ ] **Quality Gate 1**: Validation foundation checkpoint at 12:00 PM

### Day 2 Objectives

- [ ] **Interactive Documentation**: Swagger UI deployment and testing
- [ ] **Performance Guide**: Comprehensive performance documentation
- [ ] **Advanced Scenarios**: Complex integration pattern testing
- [ ] **Final Validation**: Complete documentation package verification

### Success Metrics Tracking

- **Documentation Completeness**: Target 100% (currently 75%)
- **Test Scenario Coverage**: Target 95% (currently 60%)
- **Issue Resolution Rate**: Target 90% same-day resolution
- **UAT Team Satisfaction**: Target 4.5/5 satisfaction score

---

## Appendix: Quick Reference

### Essential API Endpoints

```
GET    /migrations                    - List all migrations
POST   /migrations                    - Create new migration
GET    /migrations/{id}               - Get specific migration
PUT    /migrations/{id}               - Update migration
DELETE /migrations/{id}               - Delete migration

GET    /teams                         - List all teams
POST   /teams                         - Create new team
GET    /teams/{id}                    - Get specific team

GET    /steps                         - List steps (with filtering)
PUT    /steps/bulk/update            - Bulk update steps
GET    /steps/{id}/comments          - Get step comments
POST   /steps/{id}/comments          - Add step comment
```

### Authentication

```bash
Authorization: Basic YWRtaW46YWRtaW4=
Content-Type: application/json
```

### Common Response Codes

- `200` - Success (GET, PUT)
- `201` - Created (POST)
- `204` - No Content (DELETE)
- `400` - Bad Request
- `401` - Unauthorized
- `404` - Not Found
- `409` - Conflict
- `500` - Server Error

### Support Contacts

- **Development Team**: Sprint 5 UMIG team
- **Environment Issues**: Local development setup support
- **Documentation Questions**: API documentation team
- **Escalation**: Project manager for blocking issues

---

**Document Version**: 1.0  
**Last Updated**: August 18, 2025  
**Sprint**: 5 (US-030)  
**Status**: UAT Ready  
**Next Review**: End of Day 1 UAT execution
