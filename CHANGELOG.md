### [Unreleased]

#### 2025-08-05 (Groovy 3.0.15 Static Type Checking Compatibility Improvements)
- **Enhancement(Type Safety):** Comprehensive static type checking compatibility improvements across API and repository layers
  - Fixed dynamic property access patterns in PhasesApi.groovy, LabelRepository.groovy, and StepRepository.groovy
  - Resolved method signature mismatches and undeclared variable issues in TeamsApi.groovy and UsersApi.groovy
  - Enhanced collection typing consistency in repository methods for better static analysis
  - Added proper numeric type casting and validation in pagination logic (TeamRepository.groovy)
  - Implemented AuthenticationService.groovy with full static type checking compliance
- **Quality Assurance(Development Experience):** Improved development tooling and error prevention
  - Earlier error detection through compilation-time validation vs runtime failures
  - Enhanced IDE support for code completion, navigation, and refactoring safety
  - Eliminated ClassCastException and NoSuchMethodException runtime errors
  - Standardized method signatures across all API endpoints for consistent contracts
- **Infrastructure(Code Quality):** Strengthened architectural consistency and maintainability
  - Explicit type declarations for all method signatures and collection types
  - Replaced dynamic property access with explicit map operations for type safety
  - Added comprehensive import statements and proper variable declarations
  - Enhanced error handling for type conversion operations throughout the system
- **Documentation(Architecture):** Updated solution architecture with new compatibility patterns
  - Added comprehensive documentation of Groovy 3.0.15 compatibility improvements
  - Established mandatory practices and testing requirements for type safety
  - Defined migration strategy and future development standards for static type checking
  - Documented technical implementation patterns and benefits achieved

#### 2025-08-05 (US-004: Instructions API Implementation Complete)
- **Feature(Instructions API):** Complete instruction template and execution management system implementation (US-004)
  - Implemented 14 comprehensive REST endpoints providing full CRUD operations for instruction masters and instances
  - Created InstructionsApi.groovy with hierarchical filtering across all entity levels (migration→iteration→plan→sequence→phase→step)
  - Enhanced InstructionRepository.groovy (19 methods) with complete lifecycle management and bulk operations
  - Template-based architecture supporting instruction templates with execution instances using canonical/instance pattern
  - Seamless integration with Steps, Teams, Labels, and Controls for complete instruction management workflow
  - Type safety implementation with explicit casting for all parameters following ADR-031 conventions
  - Comprehensive error handling with SQL state mapping (23503→400, 23505→409) and proper HTTP responses
- **Quality Assurance(Comprehensive Testing):** Extensive test coverage ensuring reliability and ScriptRunner compatibility
  - Created comprehensive unit and integration test suites with 90%+ coverage including InstructionsApiSpec.groovy
  - Implemented InstructionRepositorySpec.groovy with complete method coverage and edge case testing
  - Added integration tests with proper ScriptRunner environment setup and database transaction handling
  - Performance validation meeting <200ms response time targets across all operations
  - Updated test orchestration scripts with Instructions API test execution
- **Documentation(API Specification):** Complete API documentation and specification updates
  - Created comprehensive Instructions API documentation with detailed examples and response schemas
  - Updated OpenAPI specification (openapi.yaml) with all 14 new Instructions API endpoints
  - Regenerated Postman collection with comprehensive test scenarios and proper authentication setup
  - Added Instructions schema documentation with entity relationships and data model explanations
  - Created executive architecture presentation materials in multiple formats (HTML, PDF, Markdown)
- **Infrastructure(Development Support):** Enhanced development and deployment infrastructure
  - Added grapeConfig.xml for Groovy dependency management and ScriptRunner compatibility
  - Updated test consolidation documentation with Instructions API testing patterns
  - Enhanced memory management with Serena-based project knowledge and coding standards
  - Implemented comprehensive work orchestration and documentation plan for Instructions API development

#### 2025-08-04 (US-003: Phases API Endpoint Consolidation Refactoring)
- **Refactoring(API Architecture):** Major endpoint consolidation for consistent developer experience
  - Consolidated all Phases API endpoints under single `phases` entry point with path-based routing
  - Migrated from fragmented endpoints (`phasesmaster`, `phasesinstance`, `phases`) to unified structure
  - Aligned Phases API organization with Plans and Sequences APIs for consistency
  - Updated all 21 endpoints to use consistent path patterns (`/phases/master`, `/phases/instance`)
- **Documentation(API Specification):** Complete OpenAPI and Postman collection updates
  - Updated OpenAPI specification (96 lines changed) with new consistent endpoint paths
  - Regenerated Postman collection (7,162 lines changed) with proper folder organization
  - All Phases endpoints now organized under single "Phases" folder in Postman/Swagger
  - Added missing endpoints: `/phases/master/{phm_id}/instantiate`, `/phases/instance/{phi_id}/status`
- **Infrastructure(Database):** PostgreSQL compatibility fixes and optimizations
  - Fixed PostgreSQL timestamp casting issues using `::text` conversions to resolve JDBC "hstore extension" errors
  - Simplified database queries for better performance and reliability
  - Updated PhaseRepository.groovy (42 lines changed) with timestamp handling improvements
- **Quality Assurance(Testing):** Updated validation scripts and test coverage
  - Updated validation test script (57 lines changed) with new endpoint paths
  - Added proper authentication using credentials from `.env` configuration
  - Maintained 100% test coverage across all refactored endpoints

#### 2025-08-04 (US-003: Phases API with Control Point System Complete)
- **Feature(Phases API):** Complete quality gate management system implementation (US-003)
  - Implemented 21 comprehensive REST endpoints providing full CRUD operations for master/instance phases
  - Created PhasesApi.groovy (939 lines) with hierarchical filtering (migration→iteration→plan→sequence→phase)
  - Implemented PhaseRepository.groovy (1,139 lines) with complex control point validation logic
  - Added control point validation system with emergency override capabilities and full audit trail
  - Implemented weighted progress aggregation: 70% step completion + 30% control point status
  - Added bulk reordering with dependency validation and atomic transaction management
  - Enhanced hierarchical filtering with instance ID usage (not master IDs) for correct data retrieval
  - Implemented circular dependency detection and prevention for phase ordering
- **Quality Assurance(Comprehensive Testing):** Extensive test coverage ensuring reliability
  - Created 30 comprehensive integration test scenarios covering all endpoints and edge cases
  - Implemented 1,694 lines of unit tests with 90%+ coverage including PhaseRepositoryTest.groovy
  - Added API validation scripts for endpoint verification and performance testing
  - Performance optimization meeting <200ms response time targets across all operations
  - Validated control point validation logic with emergency override scenarios
- **Documentation(API Specification):** Complete API documentation and specification updates
  - Created comprehensive API documentation (898 lines) with detailed examples and schemas
  - Updated OpenAPI specification (openapi.yaml) with all 21 new Phases API endpoints
  - Regenerated Postman collection with comprehensive test scenarios and authentication
  - Enhanced project documentation reflecting control point system and quality gate patterns
  - Added technical architecture documentation for control point validation workflows
- **Integration(Frontend Support):** Admin GUI integration for phase management
  - Enhanced admin-gui.js with modular phase management components
  - Implemented real-time progress updates and control point status visualization
  - Added emergency override UI with confirmation workflows and audit trail
  - Integrated hierarchical navigation supporting complex migration structures
- **Infrastructure(Business Logic):** Advanced business logic and validation systems
  - Implemented automated quality gates preventing execution errors
  - Added real-time progress tracking with evidence-based completion criteria
  - Created emergency override capabilities for critical path situations
  - Established foundation patterns for remaining MVP APIs (Plans, Instructions)
  - Enhanced error handling with SQL state mapping (23503→400, 23505→409)
  - Implemented type safety compliance throughout with explicit casting patterns

#### 2025-08-04 (US-002b: Database Audit Fields Standardization Complete)
- **Database(Audit Fields):** Comprehensive audit fields standardization across entire system (US-002b)
  - Added standardized audit fields (created_by, created_at, updated_by, updated_at) to all 25+ database tables
  - Implemented tiered association audit strategy based on business criticality:
    - Tier 1 (Critical): Full audit for access control tracking (teams_tms_x_users_usr)
    - Tier 2 (Standard): Minimal audit for change tracking (label associations)
    - Tier 3 (Simple): No audit overhead for pure many-to-many relationships
  - Created 3 comprehensive database migrations (016, 017, 018) with rollback capability
  - Implemented get_user_code() helper function for trigram resolution
  - Added composite indexes on audit fields for optimal query performance
- **Infrastructure(Audit Support):** Complete audit field handling infrastructure
  - Created AuditFieldsUtil.groovy with standardized utility methods
  - Added comprehensive test coverage (AuditFieldsUtilTest.groovy)
  - Updated 7 data generator scripts (002, 003, 004, 005, 006, 008, 099) for audit compliance
  - Implemented system identifier patterns ('generator', 'system', 'migration')
- **Testing:** Comprehensive audit field compliance validation
  - Fixed 4 affected generator test files with audit field parameter updates
  - Added audit field validation tests (audit_fields_test.js, 016_audit_fields_test.js)
  - Maintained 100% test coverage (74 tests passing) with audit field compliance
  - Validated migration procedures and rollback capability
- **Documentation:** Complete audit field implementation documentation
  - Added ADR-035 for Database Audit Fields Standardization
  - Created US-002b, US-002c, US-002d specifications for audit standardization work
  - Enhanced data model documentation with audit field patterns
  - Created normalization-recommendations.md for future optimization opportunities
  - Updated solution-architecture.md with comprehensive audit compliance patterns

#### 2025-07-31 (US002: Sequences API with Ordering Complete)
- **Feature(Sequences API):** Complete CRUD implementation with ordering functionality (US002)
  - Implemented SequencesApi.groovy with 12 comprehensive REST endpoints
  - Added SequenceRepository.groovy with 25 methods including full CRUD and ordering operations
  - Implemented hierarchical filtering support with ADR-030 compliance (migrationId, iterationId, planId)
  - Added advanced ordering functionality with gap handling and transaction management
  - Implemented circular dependency detection using recursive Common Table Expressions (CTEs)
  - Added full attribute instantiation following ADR-029 pattern
  - Created comprehensive test suite: SequenceRepositoryTest.groovy (unit) and SequencesApiIntegrationTest.groovy (integration)
  - Enhanced type safety compliance with explicit casting patterns (ADR-031)
  - Updated OpenAPI specification with 12 new endpoints and 5 new schema definitions
  - Regenerated Postman collection with enhanced automation (19,239 lines total)
- **Testing:** Comprehensive test coverage for new Sequences functionality
  - Added 20 test scenarios covering all CRUD operations and ordering edge cases
  - Validated circular dependency detection and gap handling in sequence ordering
  - Confirmed hierarchical filtering accuracy across all relationship levels

#### 2025-07-31 (US001: Plans API Foundation Complete)
- **Feature(Plans API):** Completed full CRUD implementation for Plans API (US001)
  - Implemented PlansApi.groovy with all standard endpoints (GET, POST, PUT, DELETE)
  - Added comprehensive hierarchical filtering support (migrationId, iterationId, teamId)
  - Implemented type safety compliance with explicit casting patterns (ADR-031)
  - Added full repository pattern with PlansRepository integration
  - Created complete integration test suite with comprehensive coverage
  - Fixed all static type checking errors for production deployment
  - Enhanced Postman collection with auto-auth and baseUrl configuration
  - Updated database configuration for improved Podman environment support
- **Documentation:** Major streamlining of project guide (CLAUDE.md)
  - Condensed from 688 to 192 lines for improved accessibility
  - Enhanced GENDEV and Quad agent integration documentation
  - Simplified development workflow and command references
  - Updated architectural patterns and critical development rules

#### 2025-07-17 (Standalone Step View Implementation & Iteration View Enhancements)
- **Feature(Step View):** Implemented standalone step view macro for displaying individual steps
  - Created new stepViewMacro.groovy that accepts URL parameters: ?mig=xxx&ite=xxx&stepid=XXX-nnn
  - Modified stepViewApi.groovy to accept migration name, iteration name, and step code for unique identification
  - Updated SQL query to filter by migration and iteration names instead of just active status
  - Created comprehensive step-view.js (890 lines) with all iteration view features:
    - Role-based controls (NORMAL, PILOT, ADMIN)
    - Instruction completion tracking with real-time updates
    - Comment management with add/edit/delete functionality
    - Status updates with dynamic dropdown
    - Email notifications on status changes
    - Label display with colors
    - Impacted teams listing
  - Added user context and Confluence authentication integration
  - Supports embedding in any Confluence page for focused step execution
  - Example URL: http://localhost:8090/display/UMIG/UMIG+-+Step+View?mig=migrationa&ite=run1&stepid=DEC-001
- **Enhancement(Iteration View):** Fixed comment functionality bugs
  - Fixed multiple clicks on edit button inserting spaces/tabs
  - Fixed cancel button not restoring original text
  - Fixed save button ReferenceError by making iterationView globally accessible
  - Replaced native confirm() with custom modal to prevent flickering
  - Fixed 404 error on comment POST by correcting endpoint URL
  - Removed "Mark all instructions as complete" and "Update status" buttons per user request
- **API(Documentation):** Updated OpenAPI specification and Postman collection
  - Added /stepViewApi/instance endpoint documentation
  - Created StepInstanceDetails schema with complete response structure
  - Regenerated Postman collection with new endpoint

#### 2025-07-17 (Environment Generation Rules & Data Quality Improvements)
- **Fix(Environment Generator):** Implemented strict iteration type rules for environment assignments
  - Ensures every iteration has all 3 roles (PROD, TEST, BACKUP) assigned
  - RUN and DR iterations never use PROD environment, only EV1-EV5
  - CUTOVER iterations always have PROD environment assigned to PROD role
  - Updated tests to validate these business rules
  - Fixes issue where CUTOVER iterations showed "(!No Environment Assigned Yet!)"
- **Fix(Label Generator):** Resolved duplicate key violations in label generation
  - Added uniqueness tracking per migration to prevent duplicate label names
  - Implements retry logic with automatic suffix generation for guaranteed uniqueness
  - Prevents "duplicate key value violates unique constraint" errors during data generation
- **Enhancement(Iteration View):** Completed dynamic environment display implementation
  - Shows actual environment names alongside roles (e.g., "PROD (PROD)" for production)
  - Displays "(!No Environment Assigned Yet!)" when environment not assigned
  - Added predecessor step information to step details
  - Moved STATUS and PREDECESSOR fields below breadcrumb for better visibility
  - Made SCOPE dynamic from steps_master_stm_x_iteration_types_itt table
  - Added Expand All/Collapse All buttons to runsheet panel
  - Split teams display into Primary Team and Impacted Teams sections
  - Added " min." suffix to all duration values for clarity
- **Tooling(Diagnostics):** Added environment association diagnostic scripts
  - checkEnvironmentAssociations.groovy - General environment association checks
  - checkCutoverProdEnvironments.groovy - CUTOVER-specific environment validation
  - compareEnvironmentAssignments.groovy - Rule compliance verification
  - checkEnvironmentAssociations.sql - Manual SQL queries for troubleshooting

#### 2025-07-17 (Workflow-Driven Development & Documentation)
- **Workflow(Development):** Executed systematic development workflows
  - Kick-off workflow: Reviewed project state and identified next priorities
  - Memory bank update: Synchronised context files with latest achievements
  - Developer journal: Created comprehensive session narrative
  - Documentation update: Ensured all documentation reflects current state
- **Documentation(Memory Bank):** Updated AI assistant context files
  - activeContext.md: Updated focus to feature completion and operational tooling
  - progress.md: Added Phase 5 for data quality improvements
  - systemPatterns.md: Added new patterns for standalone views and custom UI
  - techContext.md: Enhanced proven patterns section

#### 2025-07-16 (Architecture Documentation Consolidation & Code Cleanup)
- **Documentation(Solution Architecture):** Major consolidation of architectural decisions
  - Consolidated 7 new ADRs (027-033) into the main solution-architecture.md document
  - Updated document to reflect all 33 architectural decisions (26 previously archived + 7 newly consolidated)
  - Added comprehensive sections for N-tier architecture, data import strategy, full attribute instantiation
  - Enhanced sections on hierarchical filtering, Groovy type safety, email notifications, and role-based access control
  - Moved all processed ADRs to archive folder for historical reference
  - Solution-architecture.md now serves as the single source of truth for all architectural decisions
- **Refactor(Code Cleanup):** Removed obsolete user management components
  - Deleted userDetailMacro.groovy, userListMacro.groovy, userViewMacro.groovy from macros/v1
  - Deleted user-detail.js, user-list.js, user-view.js from web/js
  - These legacy components were replaced by the unified Admin GUI implementation
  - Removed unnecessary .gitkeep files and local configuration files
- **Documentation(ADR Management):** Archived all active ADRs after consolidation
  - ADR-027 (N-tiers Model Architecture)
  - ADR-028 (Data Import Strategy for Confluence JSON)
  - ADR-029 (Full Attribute Instantiation Instance Tables)
  - ADR-030 (Hierarchical Filtering Pattern)
  - ADR-031 (Groovy Type Safety and Filtering Patterns)
  - ADR-032 (Email Notification Architecture)
  - ADR-033 (Role-Based Access Control Implementation)

#### 2025-07-16 (Enhanced Iteration View with Role-Based Access Control)
- **Feat(Role-Based Access Control):** Implemented comprehensive user permission system
  - Added NORMAL (read-only), PILOT (operational), and ADMIN (full access) role definitions
  - Confluence user context integration with automatic role detection
  - CSS-based UI element visibility control (pilot-only, admin-only classes)
  - Dynamic role-based controls applied after user authentication
  - Read-only mode indicators for users without operational permissions
- **Enhancement(StepsApi):** Major expansion with comprehensive step instance management
  - Added GET /steps/instance/{stepInstanceId} endpoint for detailed step data
  - Added GET /statuses/{type} endpoints for dynamic status management
  - Added complete comment CRUD operations (GET, POST, PUT, DELETE /comments)
  - Added GET /user/context endpoint for role and permission validation
  - Comprehensive error handling with proper HTTP status codes
  - Support for both UUID and step code lookups for backward compatibility
- **Feat(StatusRepository):** New centralized status management repository
  - Provides type-safe access to status_sts table with entity type filtering
  - Ordered status queries for consistent UI display
  - Color-coded status support for dynamic UI styling
  - Status lookup by name and type for validation
- **Enhancement(Iteration View UI):** Comprehensive interface overhaul
  - Dynamic status dropdown with database-driven color coding
  - Interactive instruction completion tracking with checkbox controls
  - Real-time comment system with add, edit, delete operations
  - Step instance detail views with comprehensive metadata display
  - Role-based control application with visual feedback
  - Enhanced step action buttons (Mark All Complete, Update Status)
  - Improved error handling and user feedback notifications
- **Enhancement(StepRepository):** Extended with instance and comment management
- **Enhancement(API Documentation):** Updated OpenAPI specification and regenerated Postman collection
  - Added 13 new endpoint definitions covering step instances, status management, comments, and user context
  - Created comprehensive schemas for StepInstanceDetails, Status, Comment, and UserContext objects
  - Added new tags for Comments and Statuses to improve API organization
  - Generated fresh Postman collection with all new endpoints for testing and integration
  - Validated OpenAPI specification syntax and completeness
  - Added findStepInstanceDetailsById for comprehensive step data retrieval
  - Added findStepInstanceDetailsByCode for backward compatibility
  - Added comment CRUD operations (find, create, update, delete)
  - Enhanced team lookup with improved query performance
- **Enhancement(UserRepository):** Added username-based user lookup
  - Added findUserByUsername method for Confluence integration
  - Enhanced with role information and team associations
  - Support for authentication context validation
- **Enhancement(Iteration View Macro):** Confluence user context injection
  - Added automatic user context extraction from Confluence authentication
  - JavaScript configuration object with user credentials and permissions
  - Role-based control enablement through window.UMIG_ITERATION_CONFIG
- **Enhancement(CSS):** Comprehensive styling updates for new features
  - Role-based control styling (role-disabled, pilot-only, admin-only)
  - Dynamic status dropdown with color-coded backgrounds
  - Comment system styling with action buttons and edit modes
  - Read-only mode banners and visual indicators
  - Enhanced instruction row styling for completion states

#### 2025-07-16 (Status Management System & UI Fixes)
- **Feat(Database):** Implemented centralized status management system
  - Created status_sts table with sts_id, sts_name, sts_color, and sts_type columns
  - Pre-populated 31 status values across 7 entity types (Migration, Iteration, Plan, Sequence, Phase, Step, Control)
  - Added color-coding support with hex color values for each status
  - Migration 015_remove_fields_from_steps_instance_and_add_status_table.sql with proper rollback support
- **Refactor(Steps Instance):** Cleaned up redundant fields from steps_instance_sti
  - Removed usr_id_owner field (owner is at master level only)
  - Removed usr_id_assignee field (assignee is at master level only)  
  - Removed enr_id_target field (replaced with proper enr_id field)
- **Enhancement(Data Generation):** Updated all data generators to use status_sts table
  - Modified 001_generate_core_metadata.js to populate status_sts table on initialization
  - Updated 005_generate_migrations.js to use dynamic status selection for migrations and iterations
  - Refactored 099_generate_instance_data.js to select statuses from status_sts for all instance entities
  - Ensured consistent status values across entire generated dataset
- **Fix(Iteration View):** Fixed status counter consistency with new status system
  - Updated getStatusClass() function to handle exact status matches from status_sts table
  - Modified calculateAndUpdateStepCounts() to use direct status matching instead of CSS class inference
  - Enhanced getStatusDisplay() for step details panel to use centralized statuses
  - Status counters now accurately reflect: PENDING, TODO, IN_PROGRESS, COMPLETED, FAILED, BLOCKED, CANCELLED
- **Fix(Iteration View):** Resolved Teams dropdown regression showing "UNNAMED" values
  - Updated TeamRepository hierarchical filtering methods to return normalized field names
  - Changed all findTeamsBy* methods to transform database fields (tms_id→id, tms_name→name)
  - Fixed JavaScript populateFilter function compatibility with expected field names
  - Resolved teamId=undefined errors in API calls
- **Enhancement(Testing):** Updated test suite for new status management
  - Modified 001_generate_core_metadata.test.js to expect 43 queries (including status inserts)
  - Updated 099_generate_instance_data.test.js to mock status_sts queries
  - Fixed field references from enr_id_target to enr_id in test expectations
  - All 70 tests passing with new schema changes
- **Enhancement(UI/UX):** Updated step-view.md specification for STEPS subview within iteration view
  - Refactored documentation from standalone STEP View to STEPS Subview context
  - Added detailed interactive elements mapping based on Draw.io mockup analysis
  - Documented dynamic color-coded status dropdown implementation pattern
  - Enhanced with environment role context and filtering capabilities
  - Added role-based access control definitions (NORMAL, PILOT, ADMIN)
  - Documented email notification integration triggers for status changes

#### 2025-07-16 (Environment Role Association for Steps)
- **Feat(Database):** Added environment role association to steps tables
  - Added enr_id column to steps_master_stm table with foreign key to environment_roles_enr
  - Added enr_id column to steps_instance_sti table with foreign key to environment_roles_enr
  - Added indexes for performance on enr_id lookups in both tables
  - Migration 014_add_environment_role_to_steps.sql created with proper rollback support
- **Enhancement(Data Generation):** Updated synthetic data generators for environment role associations
  - Modified 004_generate_canonical_plans.js to randomly assign enr_id to steps_master_stm records
  - Updated 099_generate_instance_data.js to replicate enr_id from master to instance steps
  - Ensured proper data inheritance pattern for environment role associations
- **Enhancement(UI/UX):** Updated step-view.md specification with environment role context
  - Added environment roles and environment scope to data requirements section
  - Updated hierarchical positioning documentation to include environment relationships
  - Enhanced user role definitions (NORMAL → PILOT → ADMIN progression)
  - Added comprehensive implementation status tracking and next steps

#### 2025-07-16 (Email Notification System Implementation - Complete)
- **Feat(Email Notifications):** Production-ready email notification system with full template management and integration
  - Successfully implemented complete email notification workflow with Confluence native mail API
  - Added comprehensive error handling for template processing and email delivery
  - Integrated with StepRepository for automatic notifications on step opened, instruction completed, and status changes
  - Implemented multi-team notification logic (owner + impacted teams + cutover teams)
  - Added proper audit logging for all email events (EMAIL_SENT, EMAIL_FAILED, STATUS_CHANGED)
  - Fixed column name mismatches in audit_log_aud table (usr_id vs aud_user_id)
  - Fixed email template table name consistency (email_templates_emt)
  - Resolved static type checking issues by removing @CompileStatic annotations
  - Successfully tested end-to-end email delivery with MailHog integration
- **Fix(Email Service):** Resolved critical email delivery issues
  - Fixed EmailService.sendEmailViaMailHog() to actually send emails instead of just logging
  - Implemented proper SMTP connection with javax.mail for local development
  - Added graceful fallback when MailHog is not available
  - Fixed template variable processing with SimpleTemplateEngine
  - Corrected recipient email extraction from team objects
- **Enhancement(Testing):** Comprehensive email notification testing framework
  - Created emailNotificationTest.groovy for ScriptRunner Console testing
  - Added proper database connection using ScriptRunner's umig_db_pool
  - Implemented test scenarios for step opening, status updates, and instruction completion
  - Successfully validated email delivery with HTML content and proper styling
  - Added debugging output for template verification and step selection
- **Documentation(Architecture):** Updated solution architecture with email notification system
  - Added Section 10 documenting complete email notification architecture
  - Documented template management patterns and JSONB audit logging
  - Included notification triggers and multi-team recipient logic
  - Added development testing patterns and MailHog integration guide
  - Updated ADR reference list to include ADR-032 for email notification architecture

#### 2025-07-16 (Email Notification System Implementation)
- **Feat(Email Notifications):** Complete email notification system with template management
  - Added EmailService class with support for step opened, instruction completed, and status change notifications
  - Implemented EmailTemplateRepository for CRUD operations on email templates
  - Added AuditLogRepository for logging all email notifications and system events
  - Created EmailTemplatesApi REST endpoints for template management
  - Added email_templates_emt table with Liquibase migration for storing templates
  - Integrated email notifications into StepRepository for automatic sending
  - Added MailHog support for local development email testing
  - Implemented template processing with Groovy SimpleTemplateEngine for dynamic content
- **Feat(API):** New Email Templates API endpoints
  - Added GET /emailTemplates endpoint for listing templates with optional activeOnly filter
  - Added POST /emailTemplates endpoint for creating new templates
  - Added GET /emailTemplates/{id} endpoint for retrieving specific templates
  - Added PUT /emailTemplates/{id} endpoint for updating templates with partial update support
  - Added DELETE /emailTemplates/{id} endpoint for deleting templates
  - Added template type validation for STEP_OPENED, INSTRUCTION_COMPLETED, STEP_STATUS_CHANGED, CUSTOM
- **Enhancement(Integration):** Email notification integration with workflow
  - Added email sending to StepRepository.updateStepStatus() for status change notifications
  - Added email sending to StepRepository.openStep() for step opening notifications
  - Added email sending to StepRepository.completeInstruction() for instruction completion notifications
  - All email notifications include proper recipient selection (assigned team + impacted teams)
  - Integrated with Confluence's native mail API for production use
- **Feat(Testing):** Comprehensive email notification testing
  - Added EmailServiceTest.groovy for unit testing email functionality
  - Added emailNotificationTest.groovy for integration testing
  - Added test-email-notifications.sh script for automated testing workflow
  - Added comprehensive test coverage for all email notification scenarios
- **Documentation:** Complete API documentation for email notifications
  - Updated OpenAPI specification with Email Templates endpoints and schemas
  - Generated updated Postman collection with all email template operations
  - Added EmailTemplatesAPI.md with detailed usage examples and integration guide
  - Updated API README.md to include email templates documentation
- **Infrastructure:** Email notification architecture (ADR-032)
  - Documented email notification system architecture and design decisions
  - Established patterns for template management and notification delivery
  - Defined audit logging requirements for compliance and monitoring
  - Implemented error handling and fallback mechanisms for email delivery

#### 2025-07-16 (Labels Admin GUI Implementation)
- **Feat(Labels):** Complete Labels admin interface with full CRUD functionality
  - Added Labels to admin navigation with proper data source configuration
  - Implemented comprehensive LabelRepository with CRUD operations and dynamic update support
  - Created Labels VIEW modal with Edit button and association displays
  - Developed Labels EDIT modal with association management for applications and steps
  - Added color picker support with accessibility features (contrast color calculation)
  - Implemented migration-based filtering for steps dropdown in Labels EDIT modal
  - Added help text and dynamic loading indicators for better UX
- **Feat(API):** Extended LabelsApi with complete CRUD and association endpoints
  - Added POST /labels endpoint for creating new labels
  - Added PUT /labels/{id} endpoint for updating labels including migration changes
  - Added DELETE /labels/{id} endpoint for deleting labels
  - Added GET /labels/{id}/steps endpoint for retrieving label-associated steps
  - Added POST /labels/{labelId}/applications/{applicationId} for adding application associations
  - Added DELETE /labels/{labelId}/applications/{applicationId} for removing application associations
  - Added POST /labels/{labelId}/steps/{stepId} for adding step associations
  - Added DELETE /labels/{labelId}/steps/{stepId} for removing step associations
- **Enhancement(Steps API):** Added migration-based filtering support
  - Extended GET /steps/master endpoint to accept migrationId query parameter
  - Added findMasterStepsByMigrationId method to StepRepository
  - Ensures steps dropdown only shows steps belonging to selected migration
- **Fix(Type Safety):** Resolved multiple Groovy static type checking issues
  - Fixed explicit type casting for List operations in LabelsApi
  - Corrected Math.ceil() usage with BigDecimal to Double conversion
  - Ensured proper parameter type handling throughout the codebase
- **Enhancement(Frontend):** Improved Labels management user experience
  - Added ApiClient methods for all label operations and associations
  - Implemented dynamic step filtering based on selected migration
  - Added onMigrationChange handler for real-time dropdown updates
  - Enhanced error handling with specific error messages
  - Added loading states and disabled states for better feedback

#### 2025-07-15 (Applications Label Management)
- **Feat(Applications):** Complete Labels association management in Admin GUI
  - Added label_count column to Applications listing showing association counts
  - Implemented Labels display in VIEW modal with colored tag visualization
  - Added Labels section to EDIT modal with full CRUD functionality
  - Created add/remove functionality for Application-Label associations
  - Enhanced ApiClient with labels methods (getLabels, associateLabel, disassociateLabel)
  - Updated EntityConfig to include label_count in tableColumns and sortMapping
- **Feat(API):** Extended ApplicationsApi with label association endpoints
  - Added GET /applications/{id}/labels endpoint for retrieving application labels
  - Added PUT /applications/{appId}/labels/{labelId} for creating label associations
  - Added DELETE /applications/{appId}/labels/{labelId} for removing label associations
  - Enhanced ApplicationRepository with findApplicationLabels, associateLabel, disassociateLabel methods
  - Added label_count to findAllApplicationsWithCounts query with LEFT JOIN on labels_lbl_x_applications_app
- **Fix(Frontend):** Resolved label dropdown population issue
  - Fixed field name mismatch between Labels API (id, name) and application-specific endpoints (lbl_id, lbl_name)
  - Updated createSelectOptions call in renderApplicationLabelsEdit to use correct field names
  - Labels now properly display with their associated colors in both VIEW and EDIT modals

#### 2025-07-15 (Teams Association Management and Modal Consistency)
- **Feat(Teams):** Complete Teams association management in Admin GUI
  - Implemented Teams VIEW modal with user and application associations display
  - Added Teams EDIT modal with comprehensive association management capabilities
  - Created add/remove functionality for Team-User associations with proper validation
  - Implemented add/remove functionality for Team-Application associations
  - Added `createUserSelectOptions` method for proper user name display in dropdowns
  - Enhanced ApiClient with teams association methods (getMembers, addMember, removeMember, addApplication, removeApplication)
- **Feat(API):** Extended TeamsApi with association endpoints
  - Added GET /teams/{id}/applications endpoint for retrieving team applications
  - Added PUT /teams/{teamId}/applications/{applicationId} for adding application associations
  - Added DELETE /teams/{teamId}/applications/{applicationId} for removing application associations
  - Enhanced TeamRepository with findTeamApplications, addApplicationToTeam, removeApplicationFromTeam methods
  - Fixed SQL queries to avoid referencing non-existent audit fields in teams_tms_x_applications_app table
- **Enhancement(Environment Search):** Implemented full-stack environment search functionality
  - Added search, pagination, and sorting support to EnvironmentsApi with GString SQL fix
  - Created findAllEnvironmentsWithCounts method in EnvironmentRepository with parameterized queries
  - Fixed EntityConfig environments entity to include empty filters array for search enablement
  - Resolved GString SQL type inference error by using string concatenation instead of interpolation
- **Fix(State Management):** Resolved multiple state persistence and UI issues
  - Fixed sort field persistence bug where sort parameters persisted across entity switches
  - Updated AdminGuiState.setCurrentSection to reset sortField and sortDirection
  - Fixed confirmation dialog regression by replacing native confirm() with custom showSimpleConfirm
  - Updated removeIterationAssociation and removeIteration to use Promise-based confirmation
- **Enhancement(Users API):** Added active user filtering support
  - Extended Users API with active parameter for filtering active/inactive users
  - Updated UserRepository.findAllUsers to support activeFilter parameter
  - Added proper type validation for active parameter (true/false only)
- **UI(Modal Consistency):** Standardized modal patterns across Teams and Environments
  - Aligned Teams modal CSS styling with Environment modal structure using env-details classes
  - Added "Edit Environment" button to Environment VIEW modal for consistency with Teams modal
  - Fixed modal display method from showModal to document.body.insertAdjacentHTML
  - Implemented consistent modal footer layout and button positioning
- **Fix(Teams Modal):** Resolved Teams modal creation and display issues
  - Fixed showTeamEditModal to handle both create and edit modes properly
  - Added proper null handling for new team creation vs existing team editing
  - Fixed saveTeam method to use create() for new teams and update() for existing teams
  - Resolved modal not displaying by using correct DOM insertion method

#### 2025-07-15 (Custom Confirmation Dialog Pattern for Environment Management)
- **Fix(UI):** Resolved critical confirmation dialog flickering issue in environment association management
  - Implemented custom Promise-based confirmation dialog system replacing native `confirm()` function
  - Fixed issue where native confirm dialogs would flicker and disappear immediately in modal contexts
  - Created DOM-based confirmation overlay with high z-index (9999) to ensure visibility above existing modals
  - Added proper event handling with button click handlers that resolve/reject promises
  - Implemented automatic DOM cleanup after user interaction to prevent memory leaks
- **Enhancement(UX):** Improved user experience for destructive operations
  - Users can now reliably confirm removal of environment-application and environment-iteration associations
  - Consistent styling with application theme using inline CSS for maximum compatibility
  - Blocking design prevents user interaction with underlying UI until confirmation is provided
- **Pattern(Architecture):** Established reusable confirmation dialog pattern for complex modal workflows
  - Added technical implementation details to solution architecture documentation
  - Created template for handling browser dialog interference in SPA applications
  - Documented benefits including elimination of UI flickering and reliable event handling

#### 2025-01-15 (API Documentation and OpenAPI Updates)
- **Docs(API):** Created comprehensive UsersAPI.md specification
  - Documented all 5 endpoints with detailed request/response schemas
  - Added query parameter documentation for pagination, filtering, and sorting
  - Included error response details with SQL state codes and examples
  - Added implementation notes on type safety, pagination, and search functionality
- **Fix(OpenAPI):** Updated OpenAPI specification for accuracy
  - Fixed User schema to use integer IDs and correct field names (usr_first_name, usr_last_name)
  - Added missing UserInput schema for create/update operations
  - Fixed Team schema to use correct database field names (tms_id, tms_name, tms_email)
  - Updated all team-related endpoints to use integer IDs instead of UUIDs
- **Docs(API):** Updated TeamsAPI.md for consistency
  - Changed path parameter types from UUID to integer
  - Updated request/response schemas to use database field names
  - Fixed example responses to show correct field structure
- **Feat(Testing):** Regenerated Postman collection
  - Updated collection includes all Users API endpoints
  - Team endpoints now use correct field names and ID types
  - All request bodies match the actual database schema

#### 2025-07-15 (Admin GUI Bug Fixes and UX Improvements)
- **Fix(UI):** Resolved multiple critical issues in Admin GUI functionality
  - Fixed View modal to display ALL user attributes instead of just ID/timestamps
  - Corrected Edit modal error messages - now shows "Update" errors instead of "Create"
  - Resolved 500 Internal Server Error on user updates by implementing proper type conversion
  - Fixed missing primary key field (usr_id) in edit forms causing update failures
- **Fix(Styling):** Restored colored role and status badges
  - Recreated missing CSS styles for role badges (Super Admin, Admin, User, Pilot, No Role)
  - Added status badges (Active/Inactive) with proper color coding
  - Implemented rounded corners and consistent styling across all badges
- **Fix(Pagination):** Fixed missing pagination controls and page size selector
  - Resolved DOM structure issues where pagination was being overwritten
  - Fixed page size dropdown (25/50/100) to properly communicate with API
  - Corrected API parameter naming (pageSize → size) to match backend expectations
  - Preserved pagination HTML structure during table updates
- **Fix(Authentication):** Resolved login flow errors
  - Fixed "Cannot read properties of undefined (reading 'baseUrl')" error
  - Added proper context binding for ApiClient methods
  - Implemented initialization delay to ensure modules are ready
- **Fix(Error Handling):** Enhanced error messaging throughout the system
  - Delete operations now show specific API error messages instead of generic text
  - Example: "Cannot delete user with ID 56 as they are still referenced by other resources"
  - Fixed JSON parsing errors on successful DELETE operations (204 No Content)
  - Added proper handling for empty response bodies
- **Refactor(JavaScript):** Major refactoring of admin-gui.js into modular components
  - Split 1,901-line file into 8 focused modules:
    - EntityConfig.js: Entity configurations and field definitions
    - UiUtils.js: Utility functions and UI helpers
    - AdminGuiState.js: State management and data caching
    - ApiClient.js: API communication and error handling
    - AuthenticationManager.js: Login and session management
    - TableManager.js: Table rendering and pagination
    - ModalManager.js: Modal dialogs and form handling
    - AdminGuiController.js: Main orchestration and initialization
  - Improved maintainability and code organization
  - Enhanced error handling and type safety throughout

#### 2025-07-15 (Environments Management for Admin GUI - Enhanced)
- **Feat(Repository):** Created comprehensive EnvironmentRepository for environment data management
  - Implemented full CRUD operations for environments with proper error handling
  - Added methods to retrieve application and iteration counts with SQL aggregation
  - Created association/disassociation methods for managing environment relationships
  - Implemented `getIterationsByEnvironmentGroupedByRole()` for role-based iteration grouping
  - Added blocking relationship checks for safe deletion with detailed reporting
  - Fixed SQL query to use correct `itt_code` column for iteration types
- **Feat(API):** Created EnvironmentsApi REST endpoint following v2 API patterns
  - GET /environments - List all environments with application/iteration counts and pagination support
  - GET /environments/{id} - Retrieve single environment with full relationship details
  - GET /environments/{id}/iterations - Get iterations grouped by environment role
  - GET /environments/roles - List all available environment roles
  - POST/PUT/DELETE operations with proper constraint violation handling
  - Association endpoints for managing application and iteration relationships
  - Fixed static type checking issues by removing @Field annotations and logging
  - Added ApplicationsApi for listing applications in association dialogs
- **Feat(UI):** Enhanced Admin GUI with complete environments management
  - Added environments entity configuration with proper field definitions and sorting mappings
  - Implemented view details modal showing applications and iterations grouped by role
  - Added association management features with modal dialogs:
    - Associate Application button with dropdown selection
    - Associate Iteration button with role selection
  - Created notification system with slide-in/slide-out animations
  - Enhanced CSS with better selected menu state visibility (white text)
  - Added comprehensive error handling and user feedback
  - Integrated with existing SPA navigation and dynamic content loading patterns
- **Feat(Admin):** Completed third major entity management screen
  - Environments join Users and Teams as fully implemented admin entities
  - Consistent UI/UX patterns across all management screens
  - Feature parity with CRUD operations, pagination, search, sorting, and associations
  - Added support for many-to-many relationship management through intuitive UI

#### 2025-07-14 (Admin GUI System and Enhanced Error Handling)
- **Feat(UI):** Complete Admin GUI system implementation with SPA pattern
  - Created comprehensive administration interface for managing users, teams, applications, environments
  - Implemented full CRUD operations with modal forms and dynamic table rendering
  - Added pagination, sorting, and search functionality with real-time filtering
  - Enhanced form validation with field-specific rules and client-side validation
  - Added support for role management with proper dropdown options (Admin, User, Pilot)
- **Feat(Database):** Enhanced timestamp management and schema improvements
  - Added automatic `created_at` and `updated_at` timestamp fields to users_usr table
  - Implemented database trigger for automatic timestamp updates on record modification
  - Enhanced user data generation with proper timestamp field population
  - Added `usr_active` field support for user status management
- **Feat(API):** Comprehensive error handling and validation enhancements
  - Enhanced UsersApi with detailed SQL constraint violation reporting
  - Added field-specific error messages for NOT NULL, UNIQUE, and FOREIGN KEY violations
  - Implemented proper error response structure with details and SQL state codes
  - Enhanced DELETE operation with blocking relationship detection and reporting
- **Fix(Repository):** Resolved critical user management issues
  - Fixed missing `usr_code` field in form configuration causing NULL constraint violations
  - Enhanced UserRepository with timestamp field support and proper query selection
  - Improved data type conversion handling for select fields (rls_id integer conversion)
  - Added comprehensive field validation for user code format (3-character alphanumeric)
- **UI(Admin):** Enhanced user experience and visual feedback
  - Implemented toast notifications for success/error states with auto-dismiss
  - Added detailed error display with constraint violation specifics
  - Enhanced datetime formatting (YYYY-MM-DD HH:MM:SS) for timestamp fields
  - Improved table column sorting with proper database field mapping

#### 2025-07-10 (Hierarchical Filter Cascade and Labels Implementation)
- **Fix(API/Repository):** Resolved critical filtering and type system issues in iteration view
  - Fixed Teams filter HTTP 400 error by correcting field reference (`sti.tms_id_owner` → `stm.tms_id_owner`) and UUID parsing for INTEGER team IDs
  - Fixed Labels filter HTTP 400 error by correcting UUID parsing for INTEGER label IDs  
  - Fixed StepRepository master vs instance ID filtering (plm_id→pli_id, sqm_id→sqi_id, phm_id→phi_id)
  - Added missing `stm.stm_id` field to SELECT query to resolve "No such property" errors
  - Implemented proper Groovy static type checking with explicit casting (`filters.migrationId as String`)
- **Feat(UI):** Complete hierarchical cascade behavior and labels column
  - Implemented parent-child filter reset logic: Migration → Iteration → Plan → Sequence → Phase → Teams + Labels
  - Added Labels column to runsheet between Team and Status with colored tag display
  - Fixed JavaScript URL patterns from query parameters to nested URLs for plan/sequence/phase filtering
  - Enhanced CSS styling for label tags with proper responsive design
- **Feat(Repository):** Added labels integration with proper many-to-many relationship handling
  - Created `findLabelsByStepId()` method in StepRepository for step-label associations
  - Integrated label fetching in StepsApi with robust error handling and type conversion
  - Verified label relationships through database testing (140 step-label associations confirmed)
- **Docs(API):** Updated OpenAPI specification and regenerated Postman collection
  - Added `/steps` endpoint definition with comprehensive hierarchical filtering parameters
  - Created new schema definitions: `SequenceWithSteps`, `PhaseWithSteps`, `StepWithLabels`
  - Regenerated Postman collection from updated OpenAPI spec following api-tests-specs-update workflow

#### 2025-07-09 (GitHub Actions Integration and Steps Display)
- **CI/CD:** Added GitHub Actions workflows for Claude Code integration
  - Created claude-code-review.yml for automated code review assistance
  - Added claude.yml for PR assistant functionality
- **UI(Iteration View):** Implemented steps display with API integration
  - Added StepsApi.groovy for step data retrieval
  - Enhanced iteration view to show steps for selected phases
  - Improved API error handling and data validation

#### 2025-07-09 (Hierarchical Filtering for Teams and Labels)
- **Feat(API/UI):** Implemented cascading hierarchical filtering for Teams and Labels in Iteration View.
  - Enhanced TeamRepository with 5 new filtering methods (by migration, iteration, plan, sequence, and phase).
  - Created LabelRepository with hierarchical filtering capabilities for all levels.
  - Extended TeamsApi and created LabelsApi with consistent query parameter support (`?migrationId`, `?iterationId`, etc.).
  - Updated frontend to refresh Teams and Labels selectors based on hierarchical context.
- **Docs(API):** Comprehensive documentation updates:
  - Updated OpenAPI specification with new endpoints and query parameters.
  - Created detailed API specs for Teams and Labels (TeamsAPI.md, LabelsAPI.md).
  - Regenerated Postman collection to reflect new API capabilities.
- **UI(Iteration View):** Improved filter behavior with progressive refinement:
  - Migration selector now shows "SELECT A MIGRATION" as default text.
  - Iteration selector now shows "SELECT AN ITERATION" as default text.
  - All dependent filters reset on migration or iteration change.
  - Phase filter updates dynamically based on sequence selection.

### [Unreleased]

#### 2025-07-04 (Data Generation Pipeline Refactor)
- **Fix(Data Generation):** Resolved instance data inheritance issues by refactoring the data generation pipeline.
  - Reordered generators: renamed `101_generate_instructions.js` to `098_generate_instructions.js` to ensure master data exists before instance creation.
  - Fixed schema type mismatch in `instructions_instance_ini.tms_id` (changed from UUID to INTEGER).
  - Enhanced instance generator to properly inherit all master fields unless explicitly overridden.
  - Added debug logging to verify complete data inheritance and instance creation.
- **Test(Generators):** Updated all test suites to reflect new generator order and inheritance patterns.
- **Docs(ADR):** Documented the architectural decision for full attribute instantiation in instance tables.

#### 2025-07-04 (Iteration View Macro/API Dynamic Data)
- **Feat(Macro/API):** Iteration View macro now dynamically loads migrations from the new REST API, using a robust repository pattern and ScriptRunner-compatible DB access.
  - Created `MigrationRepository.groovy` for encapsulated migration data access.
  - Refactored `migrationApi.groovy` to call the repository and return JSON, with robust error handling.
  - Macro HTML migration selector now displays a loading placeholder and is populated client-side via JS.
  - Updated `iteration-view.js` to fetch migrations from `/rest/scriptrunner/latest/custom/migrations` and handle loading, error, and empty states gracefully.
- **Docs(API):** Added/updated API specifications for migrations in `docs/api/migrationApi.md`.
- **Pattern:** Established a reusable pattern for all future macros: UI selectors are populated via REST API and JS, not hardcoded in Groovy.

