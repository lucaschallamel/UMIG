### [Unreleased]
#### Added
- **2025-06-25:**
    - **Implemented V2 REST API Foundation:**
        - Implemented the full "Pure ScriptRunner" architecture, including a static asset-serving REST endpoint and modernized UI macro asset loading.
        - Created a complete, production-ready CRUD API for the `/api/v2/users` resource.
        - Created a complete, production-ready CRUD API for the `/api/v2/teams` resource.
        - Created a complete, production-ready CRUD API for the `/api/v2/plans` resource, refactoring the legacy `ImplementationPlanManager`.
        - Refactored the project source tree to align with the new architecture, removing legacy files and folders.
- **2025-06-25:**
    - **Refined Plan Generation Logic:**
        - The data generator now creates a single "master" canonical plan to serve as a template.
        - For each iteration, exactly two instances are generated: one `ACTIVE` (with a full hierarchy) and one `DRAFT`.
        - Plan instances now include a dynamic `pli_description` based on the master plan name and iteration type.
    - **Standardized Plan Structure:** The canonical plan is now built using a predefined, ordered list of five specific sequences (`PREMIG`, `CSD`, `W12`, `P&C`, `POSTMIG`) instead of random ones.
    - **Hardened Data Generation Tests:** Significantly improved the Jest tests for plan and instance generation to be more rigorous and deterministically validate the new business rules.
- **2025-06-25:**
    - **Data Model Refactoring (Controls & Instructions):**
        - Elevated `controls_master_ctm` from the step level to the phase level, linking them via `phm_id` for better reusability and logical grouping.
        - Streamlined `instructions_master_inm` by removing `inm_title`, `inm_format`, and the self-referencing `predecessor_inm_id`.
        - Added `tms_id` to `instructions_master_inm` to assign explicit team ownership for each instruction.
        - Added `ctm_id` to `instructions_master_inm` to allow an instruction to be directly associated with a master control.
    - **Data Generator Updates:** Heavily refactored `06_generate_canonical_plans.js` to align with the new control and instruction schema, ensuring controls are generated per phase and linked correctly.
    - **Comprehensive Documentation:** Created a new, detailed data model document at `docs/dataModel/README.md`, including a full explanation of the canonical vs. instance architecture and a complete Mermaid ERD.

- **2025-06-25:**
    - **Refactored Liquibase Migrations:** Consolidated all database schema migrations into a single, unified baseline file (`001_unified_baseline.sql`). This simplifies the migration process and improves maintainability.
    - **Idempotent Schema Script:** Made the baseline migration script idempotent by adding `DROP TABLE ... CASCADE` statements. This ensures a clean and reliable database setup on every run, resolving previous startup failures caused by persistent Docker volumes.
    - **Legacy Data Model Removal:** Completely removed the legacy data model, including the `05_generate_legacy_plans.js` data generator and all associated table definitions from the schema.
    - **Established Liquibase Conventions:** Defined and documented new conventions for Liquibase changesets, including author/ID naming (`<git_user>:<file_name>`) and a strategy for using tags and labels. The documentation was added to `local-dev-setup/README.md`.
- Enhanced `umig_generate_fake_data.js` to support configurable generation of NORMAL, ADMIN, and PILOT users, with unique trigrams and correct team assignment logic (all ADMIN and PILOT users assigned to IT_CUTOVER; every team receives at least one NORMAL user).
- Added/updated Jest integration tests to verify: every team has at least one member, every user belongs to exactly one team, every application is assigned to exactly one team, and all ADMIN/PILOT users are in IT_CUTOVER.
- Updated `fake_data_config.json` to allow configuration of user/role counts.
- **2025-06-24:**
    - Refactored `status_sts` table: renamed `sts_code` to `entity_type`, widened columns, prepopulated with entity-specific statuses via migration `011_refactor_status_sts.sql`.
    - Added unique constraint to `stt_code` in `step_type_stt` (baseline schema).
    - Added `type_color` column (hex color code, VARCHAR(7)) to `step_type_stt` via migration `012_add_type_color_to_step_type_stt.sql`.
    - Updated data generation script to prepopulate `step_type_stt` with codes, names, descriptions, and color codes; uses idempotent insert logic.
    - Improved `resetDatabase()` to protect reference and migration tracking tables from truncation.
    - All integration and unit tests pass, confirming robust reference data and safe resets.
    - Documentation and subfolder READMEs updated to reflect schema and data generation changes.
    - Added Liquibase migration `013_create_canonical_implementation_plan_tables.sql` for creation of canonical implementation plan tables as defined in ADR-015:
        - `implementation_plans_canonical_ipc` (canonical plan templates)
        - `sequences_master_sqm` (canonical sequences/phases)
        - `chapters_master_chm` (canonical chapters)
        - `steps_master_stm` (canonical steps)
        - `instructions_master_inm` (canonical instructions)
        - `controls_master_ctl` (canonical controls/validation checks)
    - Completely refactored the monolithic `umig_generate_fake_data.js` script into a modular system with single-responsibility generator files:
        - `01_generate_core_metadata.js`
        - `02_generate_teams_apps.js`
        - `03_generate_users.js`
        - `04_generate_environments.js`
        - `05_generate_legacy_plans.js`
        - `06_generate_canonical_plans.js`
    - Added new generator (`06_generate_canonical_plans.js`) to populate the new canonical tables.
    - Merged branch `main` into `data/tracking_activities` to synchronize latest changes.
- **2025-06-25:**
    - **Defined Application Architecture:**
        - Formalized a "Pure ScriptRunner Application" architecture, avoiding a formal Confluence plugin structure.
        - Established a new project source structure: `src/com/umig` for backend, `src/macros` for UI scripts, and `src/web` for CSS/JS assets.
        - Documented the decision in `ADR-018`.
#### Changed
- Refactored `steps_stp` to use a foreign key to the re-introduced `status_sts` table, removing the hardcoded `status` column and normalizing the schema.
- Removed obsolete `usr_code` from `users_usr` in schema and documentation.
- Updated `/local-dev-setup/data-utils/README.md` to document new conventions, configuration, and tests.
- Updated the `controls_ctl` table to match the original SQL Server specification: added producer, IT/biz validator and comments fields, removed description/type/status.
- Removed the `env_type` field from the `environments_env` table as it is no longer needed.
- Added the `environments_iterations_eit` join table to associate environments and iterations, with optional role support.
- The `iterations_ite` table: removed the `ite_sequence` column and added a free `description` field.
- The `sequences_sqc` table now references `migrations_mig` via `mig_id` instead of `iterations_ite` via `ite_id`. Added `start_date` and `end_date` columns to support scheduling and tracking.
- Added a `comments` field to the `environments_applications_eap` table for storing additional notes or metadata about environment-application relationships.
- Modified the `users_usr` table to replace the single `usr_name` field with `usr_first_name`, `usr_last_name`, and `usr_trigram` to allow for more granular user data management. Updated all relevant schema files and documentation.
- Refactored database schema to enforce new table and column naming conventions:
    - `teams` → `teams_tms`
    - `team_members`/`team_members_usr` → `users_usr`
    - `implementation_plans`/`implementation_plans_ipl` → `migrations_mig`
- Updated all foreign key constraints, join tables, and references accordingly.
- Removed legacy table definitions and references from all changelogs.

#### Fixed
- Heavily refactored the legacy plan generator (`05_generate_legacy_plans.js`) to resolve multiple critical bugs, including syntax errors and schema mismatches with the `migrations_mig` and `iterations_ite` tables. The script now successfully generates a complete, hierarchical legacy plan dataset.
- Corrected the baseline Liquibase schema (`001_baseline_schema.sql`) to be a complete 1:1 representation of the original SQL Server data model.
- Added previously missing tables (`ITERATIONS_TRACKING_ITT`) and columns (`tms_email` in `TEAMS_TMS`) to ensure full synchronization.
- Verified all 19 tables and their fields are now correctly defined as per the source model.
- Fixed a bug in the data generation script (`umig_generate_fake_data.js`) where the `generateSequences` function was incorrectly trying to insert an `ite_id` instead of a `mig_id` into the `sequences_sqc` table.
